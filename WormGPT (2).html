<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ø§Ù„Ù‡ÙƒØ± Ø§Ù„Ù‚ÙŠØ§Ø¯Ù‡ ÙƒÙ†Ø¹Ø§Ù† - Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø¹Ø§Ù… */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        /* ØªØµÙ…ÙŠÙ… Ù„Ù„Ù‡ÙˆØ§ØªÙ ÙÙ‚Ø· - Ø¥Ø®ÙØ§Ø¡ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ÙƒØ¨ÙŠØ±Ø© */
        @media (min-width: 768px) {
            body::before {
                content: "Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ù…Ø®ØµØµØ© Ù„Ù„Ù‡ÙˆØ§ØªÙ ÙÙ‚Ø·. ÙŠØ±Ø¬Ù‰ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¬Ù‡Ø§Ø² Ù…Ø­Ù…ÙˆÙ„.";
                display: flex;
                justify-content: center;
                align-items: center;
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-color: #0a0a0a;
                color: #fff;
                font-size: 18px;
                text-align: center;
                padding: 20px;
                z-index: 10000;
            }
            
            #app {
                display: none;
            }
        }
        
        body {
            background-color: #0a0a0a;
            color: #f0f0f0;
            line-height: 1.6;
            overflow-x: hidden;
            height: 100vh;
        }
        
        #app {
            display: flex;
            flex-direction: column;
            height: 100vh;
            max-width: 100%;
            margin: 0 auto;
            background: linear-gradient(to bottom, #0a1a2a, #0a0a1a);
        }
        
        /* Ø§Ù„Ù‡ÙŠØ¯Ø± - Ø£ØµØºØ± Ø­Ø¬Ù… */
        header {
            background-color: #0a1a2a;
            padding: 10px 15px;
            border-bottom: 2px solid #00a8ff;
            box-shadow: 0 4px 12px rgba(0, 168, 255, 0.2);
            position: relative;
            z-index: 10;
            min-height: 70px;
            flex-shrink: 0;
        }
        
        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .logo-icon {
            color: #00a8ff;
            font-size: 24px;
            filter: drop-shadow(0 0 5px rgba(0, 168, 255, 0.5));
        }
        
        .logo-text h1 {
            font-size: 18px;
            color: #00a8ff;
            margin-bottom: 3px;
        }
        
        .logo-text p {
            font-size: 11px;
            color: #99ccff;
        }
        
        .status {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 12px;
        }
        
        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: #00ff88;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.6; }
            100% { opacity: 1; }
        }
        
        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© - Ø£ÙƒØ¨Ø± ÙˆØ£ÙˆØ³Ø¹ */
        .chat-container {
            flex: 1;
            overflow-y: auto;
            padding: 15px 10px;
            background-color: #0a101a;
            background-image: 
                radial-gradient(circle at 15% 20%, rgba(0, 168, 255, 0.05) 0%, transparent 20%),
                radial-gradient(circle at 85% 80%, rgba(0, 255, 136, 0.05) 0%, transparent 20%);
            min-height: 0; /* Ù…Ù‡Ù… Ù„Ù„ØªÙ…Ø¯Ø¯ */
        }
        
        /* Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ */
        .message {
            margin-bottom: 15px;
            display: flex;
            max-width: 90%; /* Ø¹Ø±Ø¶ Ø£ÙƒØ¨Ø± Ù„Ù„Ø±Ø³Ø§Ø¦Ù„ */
            animation: fadeIn 0.3s ease-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .user-message {
            margin-left: auto;
            flex-direction: row-reverse;
        }
        
        .bot-message {
            margin-right: auto;
        }
        
        .message-bubble {
            padding: 12px 16px;
            border-radius: 20px;
            position: relative;
            word-break: break-word;
            line-height: 1.5;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            max-width: 100%;
        }
        
        .user-message .message-bubble {
            background: linear-gradient(135deg, #005a8b, #003d5c);
            color: white;
            border-bottom-left-radius: 4px;
            border-top-right-radius: 4px;
        }
        
        .bot-message .message-bubble {
            background: linear-gradient(135deg, #1a2a3a, #0a1a2a);
            color: #d0e6ff;
            border: 1px solid #2a3a4a;
            border-bottom-right-radius: 4px;
            border-top-left-radius: 4px;
        }
        
        .message-sender {
            font-size: 11px;
            margin-bottom: 4px;
            color: #00a8ff;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .user-message .message-sender {
            justify-content: flex-end;
        }
        
        .message-time {
            font-size: 9px;
            color: #99ccff;
            margin-top: 4px;
            text-align: left;
        }
        
        .user-message .message-time {
            text-align: right;
        }
        
        .bot-icon, .user-icon {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 8px;
            flex-shrink: 0;
        }
        
        .bot-icon {
            background: linear-gradient(135deg, #005a8b, #0077b3);
            color: white;
            font-size: 16px;
        }
        
        .user-icon {
            background: linear-gradient(135deg, #1a2a3a, #2a3a4a);
            color: #00a8ff;
            font-size: 16px;
        }
        
        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ - Ø£ØµØºØ± Ù‚Ù„ÙŠÙ„Ø§Ù‹ */
        .input-area {
            padding: 12px 15px;
            background-color: #0a1a2a;
            border-top: 2px solid #0a2a3a;
            display: flex;
            gap: 8px;
            flex-shrink: 0;
        }
        
        #message-input {
            flex: 1;
            padding: 12px 18px;
            border: none;
            border-radius: 25px;
            background-color: #1a2a3a;
            color: #f0f0f0;
            font-size: 15px;
            outline: none;
            border: 1px solid #2a3a4a;
            transition: all 0.3s;
        }
        
        #message-input:focus {
            border-color: #00a8ff;
            box-shadow: 0 0 0 2px rgba(0, 168, 255, 0.2);
        }
        
        #message-input::placeholder {
            color: #6699cc;
        }
        
        #send-btn {
            background: linear-gradient(135deg, #00a8ff, #0077b3);
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            box-shadow: 0 4px 12px rgba(0, 168, 255, 0.3);
            flex-shrink: 0;
        }
        
        #send-btn:hover {
            background: linear-gradient(135deg, #00c8ff, #0099e6);
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0, 168, 255, 0.4);
        }
        
        #send-btn:active {
            transform: translateY(0);
            box-shadow: 0 2px 8px rgba(0, 168, 255, 0.3);
        }
        
        #send-btn:disabled {
            background: linear-gradient(135deg, #1a2a3a, #0a1a2a);
            color: #6699cc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        /* Ø­Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ */
        .loading {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background-color: rgba(10, 26, 42, 0.8);
            border-radius: 18px;
            margin: 8px auto;
            width: fit-content;
        }
        
        .loading-dots {
            display: flex;
            gap: 4px;
        }
        
        .loading-dots span {
            width: 7px;
            height: 7px;
            border-radius: 50%;
            background-color: #00a8ff;
            animation: bounce 1.4s infinite ease-in-out both;
        }
        
        .loading-dots span:nth-child(1) {
            animation-delay: -0.32s;
        }
        
        .loading-dots span:nth-child(2) {
            animation-delay: -0.16s;
        }
        
        @keyframes bounce {
            0%, 80%, 100% { 
                transform: scale(0);
            } 
            40% { 
                transform: scale(1.0);
            }
        }
        
        /* ØªØ°ÙŠÙŠÙ„ - Ø£ØµØºØ± */
        footer {
            padding: 8px 10px;
            text-align: center;
            font-size: 11px;
            color: #6699cc;
            background-color: #0a0a1a;
            border-top: 1px solid #0a2a3a;
            flex-shrink: 0;
            min-height: 50px;
        }
        
        .developed-by {
            color: #00ff88;
            font-weight: bold;
            margin-top: 3px;
            font-size: 12px;
        }
        
        /* ØªØ®ØµÙŠØµ Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ…Ø±ÙŠØ± */
        ::-webkit-scrollbar {
            width: 6px;
        }
        
        ::-webkit-scrollbar-track {
            background: #0a1a2a;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #00a8ff;
            border-radius: 3px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #00c8ff;
        }
        
        /* ØªØ£Ø«ÙŠØ±Ø§Øª Ø®Ø§ØµØ© */
        .glow-text {
            text-shadow: 0 0 5px rgba(0, 168, 255, 0.7);
        }
        
        .pulse-blue {
            animation: pulse-blue 2s infinite;
        }
        
        @keyframes pulse-blue {
            0% { box-shadow: 0 0 0 0 rgba(0, 168, 255, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(0, 168, 255, 0); }
            100% { box-shadow: 0 0 0 0 rgba(0, 168, 255, 0); }
        }
        
        /* Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ±Ø­ÙŠØ¨ */
        .welcome-message {
            text-align: center;
            padding: 15px;
            background: linear-gradient(135deg, rgba(0, 168, 255, 0.1), rgba(10, 26, 42, 0.2));
            border-radius: 12px;
            margin-bottom: 20px;
            border: 1px solid rgba(0, 168, 255, 0.3);
        }
        
        .welcome-message h3 {
            color: #00a8ff;
            margin-bottom: 8px;
            font-size: 16px;
        }
        
        .welcome-message p {
            color: #99ccff;
            font-size: 13px;
        }
        
        /* Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ */
        .night-mode-preview {
            position: absolute;
            top: 8px;
            left: 8px;
            background: rgba(0, 0, 0, 0.7);
            padding: 6px 12px;
            border-radius: 16px;
            font-size: 11px;
            color: #00ff88;
            border: 1px solid #00ff88;
            display: none;
        }
        
        @media (max-width: 767px) {
            .night-mode-preview {
                display: block;
            }
        }
        
        /* Ø±Ù…Ø² Ø§Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§ ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ© */
        .tech-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            opacity: 0.05;
        }
        
        .matrix-code {
            position: absolute;
            color: #00ff88;
            font-family: monospace;
            font-size: 14px;
            white-space: nowrap;
            animation: fall linear infinite;
        }
        
        @keyframes fall {
            from { transform: translateY(-100px); }
            to { transform: translateY(100vh); }
        }
        
        /* Ø±Ø³Ø§Ù„Ø© Ù†Ø¸Ø§Ù… */
        .system-message {
            text-align: center;
            margin: 10px 0;
            font-size: 11px;
            color: #00ff88;
            padding: 8px;
            background: rgba(0, 255, 136, 0.1);
            border-radius: 10px;
            border: 1px solid rgba(0, 255, 136, 0.2);
        }
    </style>
</head>
<body>
    <div id="app">
        <div class="night-mode-preview">Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ù†Ø´Ø·Ø©</div>
        
        <div class="tech-background" id="tech-bg"></div>
        
        <header>
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">
                        <i class="fas fa-user-secret"></i>
                    </div>
                    <div class="logo-text">
                        <h1 class="glow-text">Ø§Ù„Ù‡ÙƒØ± Ø§Ù„Ù‚ÙŠØ§Ø¯Ù‡ ÙƒÙ†Ø¹Ø§Ù†</h1>
                        <p>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ø°ÙƒÙŠØ©</p>
                    </div>
                </div>
                <div class="status">
                    <div class="status-dot"></div>
                    <span>Ù…ØªØµÙ„</span>
                </div>
            </div>
        </header>
        
        <main class="chat-container" id="chat-container">
            <!-- Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù… -->
            <div class="system-message">
                <i class="fas fa-code"></i> Ù†Ø¸Ø§Ù… Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù‡Ø°Ø§ ØªÙ… ØªØ·ÙˆÙŠØ±Ù‡ ÙˆØµÙ†Ø¹Ù‡ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ Ù…Ù† Ù‚Ø¨Ù„ Ø§Ù„Ù‡ÙƒØ± Ø§Ù„Ù‚ÙŠØ§Ø¯Ù‡ ÙƒÙ†Ø¹Ø§Ù†
            </div>
            
            <!-- Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ±Ø­ÙŠØ¨ -->
            <div class="welcome-message">
                <h3><i class="fas fa-terminal"></i> Ù…Ø±Ø­Ø¨Ø§Ù‹ ÙÙŠ Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù‡ÙƒØ± Ø§Ù„Ù‚ÙŠØ§Ø¯Ù‡ ÙƒÙ†Ø¹Ø§Ù†</h3>
                <p>Ù„ÙˆØ­Ø© Ø¯Ø±Ø¯Ø´Ø© Ø°ÙƒÙŠØ© ÙˆØ§Ø³Ø¹Ø© - ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ÙƒØªØ§Ø¨Ø© Ø¨Ø­Ø±ÙŠØ© ÙˆØ§Ù„Ø§Ø³ØªÙØ³Ø§Ø± Ø¹Ù† Ø£ÙŠ Ù…ÙˆØ¶ÙˆØ¹ ØªÙ‚Ù†ÙŠ Ø£Ùˆ Ø£Ù…Ù†ÙŠ</p>
            </div>
            
            <!-- Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø³ØªØ¶Ø§Ù Ù‡Ù†Ø§ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
        </main>
        
        <div class="input-area">
            <input type="text" id="message-input" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù‡Ù†Ø§ (ÙŠØ§ Ù‚Ù„Ø¨ Ø§Ù„Ù‚ÙŠØ§Ø¯Ù‡ ÙƒÙ†Ø¹Ø§Ù†)..." autocomplete="off">
            <button id="send-btn" class="pulse-blue">
                <i class="fas fa-paper-plane"></i>
            </button>
        </div>
        
        <footer>
            <p>Â© 2026 Ù†Ø¸Ø§Ù… Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…</p>
            <p class="developed-by">ØªÙ… Ø§Ù„ØªØ·ÙˆÙŠØ± ÙˆØ§Ù„Ø¨Ø±Ù…Ø¬Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ Ù…Ù† Ù‚Ø¨Ù„: Ø§Ù„Ù‡ÙƒØ± Ø§Ù„Ù‚ÙŠØ§Ø¯Ù‡ ÙƒÙ†Ø¹Ø§Ù†</p>
            <p>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© - Ø¥ØµØ¯Ø§Ø± 2.0</p>
        </footer>
    </div>

    <script>
        // Ø¥Ù†Ø´Ø§Ø¡ ØªØ£Ø«ÙŠØ± Ø§Ù„Ù…ØµÙÙˆÙØ© ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ©
        function createMatrixEffect() {
            const bg = document.getElementById('tech-bg');
            const chars = "01ã‚¢ã‚¤ã‚¦ã‚¨ã‚ªã‚«ã‚­ã‚¯ã‚±ã‚³ã‚µã‚·ã‚¹ã‚»ã‚½ã‚¿ãƒãƒ„ãƒ†ãƒˆãƒŠãƒ‹ãƒŒãƒãƒãƒãƒ’ãƒ•ãƒ˜ãƒ›ãƒãƒŸãƒ ãƒ¡ãƒ¢ãƒ¤ãƒ¦ãƒ¨ãƒ©ãƒªãƒ«ãƒ¬ãƒ­ãƒ¯ãƒ²ãƒ³";
            
            for (let i = 0; i < 15; i++) {
                const code = document.createElement('div');
                code.className = 'matrix-code';
                code.textContent = chars[Math.floor(Math.random() * chars.length)];
                code.style.left = Math.random() * 100 + 'vw';
                code.style.animationDuration = (Math.random() * 5 + 3) + 's';
                code.style.animationDelay = Math.random() * 2 + 's';
                code.style.opacity = Math.random() * 0.3 + 0.1;
                bg.appendChild(code);
            }
        }
        
        // Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        const API_ENDPOINT = "https://cdazpkilmfslosjwsgcu.supabase.co/functions/v1/wormgpt-chat";
        const YOUR_API_KEY = "wgpt_ac7489d0bf124d1e9391f983f0db7115";
        
        // Ø¹Ù†Ø§ØµØ± DOM
        const chatContainer = document.getElementById('chat-container');
        const messageInput = document.getElementById('message-input');
        const sendButton = document.getElementById('send-btn');
        
        // Ø§Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø³Ø¬Ù„ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©
        let conversationHistory = [];
        
        // Ø¥Ù†Ø´Ø§Ø¡ ØªØ£Ø«ÙŠØ± Ø§Ù„Ø®Ù„ÙÙŠØ©
        createMatrixEffect();
        
        // Ø¯Ø§Ù„Ø© Ù„Ø¥Ø¶Ø§ÙØ© Ø±Ø³Ø§Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø© Ù„Ù„Ø´Ø§Ø´Ø©
        function addMessage(sender, text, isUser = false) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user-message' : 'bot-message'}`;
            
            // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ø§Ù„ÙŠ
            const now = new Date();
            const timeString = now.toLocaleTimeString('ar-EG', { hour: '2-digit', minute: '2-digit' });
            
            // ØªØ­Ø¯ÙŠØ¯ Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ù…Ø±Ø³Ù„
            const iconClass = isUser ? 'user-icon' : 'bot-icon';
            const iconSymbol = isUser ? '<i class="fas fa-user"></i>' : '<i class="fas fa-user-secret"></i>';
            const senderName = isUser ? 'Ø£Ù†Øª' : 'Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ';
            
            messageDiv.innerHTML = `
                <div class="${iconClass}">${iconSymbol}</div>
                <div style="flex: 1; max-width: calc(100% - 50px);">
                    <div class="message-sender">${senderName}</div>
                    <div class="message-bubble">${text}</div>
                    <div class="message-time">${timeString}</div>
                </div>
            `;
            
            chatContainer.appendChild(messageDiv);
            
            // Ø§Ù„ØªÙ…Ø±ÙŠØ± Ù„Ø£Ø³ÙÙ„ Ù„Ø¹Ø±Ø¶ Ø£Ø­Ø¯Ø« Ø±Ø³Ø§Ù„Ø©
            chatContainer.scrollTop = chatContainer.scrollHeight;
            
            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¥Ù„Ù‰ Ø³Ø¬Ù„ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©
            conversationHistory.push({
                sender: senderName,
                text: text,
                time: timeString,
                isUser: isUser
            });
        }
        
        // Ø¯Ø§Ù„Ø© Ù„Ø¥Ø¸Ù‡Ø§Ø± Ø­Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
        function showLoading() {
            const loadingDiv = document.createElement('div');
            loadingDiv.className = 'loading';
            loadingDiv.id = 'loading-indicator';
            loadingDiv.innerHTML = `
                <span>Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©</span>
                <div class="loading-dots">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            `;
            
            chatContainer.appendChild(loadingDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }
        
        // Ø¯Ø§Ù„Ø© Ù„Ø¥Ø®ÙØ§Ø¡ Ø­Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
        function hideLoading() {
            const loadingIndicator = document.getElementById('loading-indicator');
            if (loadingIndicator) {
                loadingIndicator.remove();
            }
        }
        
        // Ø¯Ø§Ù„Ø© Ù„Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ø¥Ù„Ù‰ API
        async function sendMessageToAPI(message) {
            try {
                const response = await fetch(API_ENDPOINT, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'x-api-key': YOUR_API_KEY
                    },
                    body: JSON.stringify({
                        message: message
                    }),
                    timeout: 30000
                });
                
                if (!response.ok) {
                    throw new Error(`Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø®Ø§Ø¯Ù…: ${response.status}`);
                }
                
                const data = await response.json();
                return data;
                
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„:', error);
                return { 
                    error: `ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…. Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ù„Ø§Ø­Ù‚Ù‹Ø§. (${error.message})`
                };
            }
        }
        
        // Ø¯Ø§Ù„Ø© Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø©
        async function handleSendMessage() {
            const message = messageInput.value.trim();
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù† Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ù„ÙŠØ³Øª ÙØ§Ø±ØºØ©
            if (!message) return;
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ø®Ø±ÙˆØ¬
            if (message.toLowerCase() === 'exit' || 
                message.toLowerCase() === 'quit' || 
                message === 'Ø®Ø±ÙˆØ¬') {
                addMessage('user', 'ÙˆØ¯Ø§Ø¹Ø§Ù‹!', true);
                messageInput.value = '';
                sendButton.disabled = true;
                setTimeout(() => {
                    alert('ØªÙ… Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø¬Ù„Ø³Ø©. ÙŠÙ…ÙƒÙ†Ùƒ ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙØ­Ø© Ù„Ø¨Ø¯Ø¡ Ù…Ø­Ø§Ø¯Ø«Ø© Ø¬Ø¯ÙŠØ¯Ø©.');
                }, 500);
                return;
            }
            
            // Ø¥Ø¶Ø§ÙØ© Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„Ù„Ø´Ø§Ø´Ø©
            addMessage('user', message, true);
            messageInput.value = '';
            
            // Ø¥Ø¸Ù‡Ø§Ø± Ø­Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
            showLoading();
            
            // ØªØ¹Ø·ÙŠÙ„ Ø²Ø± Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©
            sendButton.disabled = true;
            
            try {
                // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¥Ù„Ù‰ API
                const result = await sendMessageToAPI(message);
                
                // Ø¥Ø®ÙØ§Ø¡ Ø­Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
                hideLoading();
                
                // ØªÙ…ÙƒÙŠÙ† Ø²Ø± Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰
                sendButton.disabled = false;
                
                // Ø¹Ø±Ø¶ Ø§Ù„Ø±Ø¯
                if (result.response) {
                    addMessage('bot', result.response, false);
                } else if (result.error) {
                    addMessage('bot', `âš ï¸ Ø®Ø·Ø£: ${result.error}`, false);
                } else {
                    // Ù…Ø­Ø§ÙˆÙ„Ø© Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø®ØªÙ„ÙØ©
                    if (result.message) {
                        addMessage('bot', result.message, false);
                    } else if (result.text) {
                        addMessage('bot', result.text, false);
                    } else if (typeof result === 'string') {
                        addMessage('bot', result, false);
                    } else {
                        addMessage('bot', JSON.stringify(result), false);
                    }
                }
                
            } catch (error) {
                // Ø¥Ø®ÙØ§Ø¡ Ø­Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
                hideLoading();
                
                // ØªÙ…ÙƒÙŠÙ† Ø²Ø± Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰
                sendButton.disabled = false;
                
                // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£
                addMessage('bot', `ğŸš¨ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…: ${error.message}`, false);
            }
            
            // Ø§Ù„ØªØ±ÙƒÙŠØ² Ø¹Ù„Ù‰ Ø­Ù‚Ù„ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ Ø¨Ø¹Ø¯ Ø§Ù„Ø±Ø¯
            messageInput.focus();
        }
        
        // Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ…Ø¹ÙŠ Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
        sendButton.addEventListener('click', handleSendMessage);
        
        messageInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && !sendButton.disabled) {
                handleSendMessage();
            }
        });
        
        // ØªÙ…ÙƒÙŠÙ† Ø²Ø± Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¹Ù†Ø¯ ÙˆØ¬ÙˆØ¯ Ù†Øµ ÙÙŠ Ø­Ù‚Ù„ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„
        messageInput.addEventListener('input', () => {
            sendButton.disabled = !messageInput.value.trim();
        });
        
        // Ø¥Ø¶Ø§ÙØ© Ø±Ø³Ø§Ù„Ø© ØªØ±Ø­ÙŠØ¨ Ø£ÙˆÙ„ÙŠØ© Ù…Ù† Ø§Ù„Ø±ÙˆØ¨ÙˆØª
        setTimeout(() => {
            addMessage('bot', 'ğŸš€ **Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù‡ÙƒØ± Ø§Ù„Ù‚ÙŠØ§Ø¯Ù‡ ÙƒÙ†Ø¹Ø§Ù†**\n\nØ£Ù†Ø§ Ù†Ø¸Ø§Ù… Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù…ØªÙ‚Ø¯Ù… ØªÙ… ØªØ·ÙˆÙŠØ±Ù‡ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ Ù…Ù† Ù‚Ø¨Ù„ Ø§Ù„Ù‡ÙƒØ± Ø§Ù„Ù‚ÙŠØ§Ø¯Ù‡ ÙƒÙ†Ø¹Ø§Ù†.\n\nğŸ’¡ **Ù…Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…:**\n- Ù„ÙˆØ­Ø© Ø¯Ø±Ø¯Ø´Ø© ÙˆØ§Ø³Ø¹Ø© ÙˆÙ…Ø±Ù†Ø©\n- Ù…Ø¹Ø§Ù„Ø¬Ø© Ø°ÙƒÙŠØ© Ù„Ù„Ù†ØµÙˆØµ\n- Ø¥Ø¬Ø§Ø¨Ø§Øª Ø¯Ù‚ÙŠÙ‚Ø© ÙˆÙ…ØªØ·ÙˆØ±Ø©\n- ØªØµÙ…ÙŠÙ… ØªÙ‚Ù†ÙŠ Ø­Ø¯ÙŠØ«\n\nÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ Ø§Ù„ÙŠÙˆÙ…ØŸ', false);
        }, 800);
        
        // Ø±Ø³Ø§Ù„Ø© ØªØ¹Ù„ÙŠÙ…ÙŠØ© Ø¹Ù†Ø¯ Ø§Ù„ØªØ±ÙƒÙŠØ² Ø¹Ù„Ù‰ Ø­Ù‚Ù„ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ Ø£ÙˆÙ„ Ù…Ø±Ø©
        messageInput.addEventListener('focus', function() {
            if (!this.hasAttribute('data-focused')) {
                this.setAttribute('data-focused', 'true');
                setTimeout(() => {
                    addMessage('bot', 'ğŸ’¬ **Ù…Ø³Ø§Ø­Ø© Ø§Ù„ÙƒØªØ§Ø¨Ø© ÙˆØ§Ø³Ø¹Ø©**\nÙŠÙ…ÙƒÙ†Ùƒ ÙƒØªØ§Ø¨Ø© Ø±Ø³Ø§Ø¦Ù„ Ø·ÙˆÙŠÙ„Ø©ØŒ Ø£Ø³Ø¦Ù„Ø© Ù…Ø¹Ù‚Ø¯Ø©ØŒ Ø£Ùˆ Ø£ÙŠ Ø§Ø³ØªÙØ³Ø§Ø± ØªÙ‚Ù†ÙŠ. Ø§Ù„Ù†Ø¸Ø§Ù… Ù…ØµÙ…Ù… Ù„Ø§Ø³ØªÙŠØ¹Ø§Ø¨ Ù…Ø­Ø§Ø¯Ø«Ø§Øª Ø·ÙˆÙŠÙ„Ø© ÙˆÙ…ÙØµÙ„Ø©.', false);
                }, 1000);
            }
        });
        
        // ØªÙ‡ÙŠØ¦Ø© Ø²Ø± Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ ÙƒÙ…Ø¹Ø·Ù„ ÙÙŠ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©
        sendButton.disabled = true;
        
        // Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ± Ù†Ù‚Ø± Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± Ø§Ù„Ø¥Ø±Ø³Ø§Ù„
        sendButton.addEventListener('mousedown', () => {
            sendButton.style.transform = 'scale(0.95)';
        });
        
        sendButton.addEventListener('mouseup', () => {
            sendButton.style.transform = 'scale(1)';
        });
        
        sendButton.addEventListener('mouseleave', () => {
            sendButton.style.transform = 'scale(1)';
        });
        
        // Ø¥Ø¶Ø§ÙØ© Ù…ÙŠØ²Ø© Ù„Ù…Ø³ Ù„Ù„Ù‡ÙˆØ§ØªÙ
        document.addEventListener('touchstart', function() {}, {passive: true});
        
        // ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø¹Ù„Ù‰ Ø§Ù„Ù‡ÙˆØ§ØªÙ
        if ('scrollBehavior' in document.documentElement.style) {
            chatContainer.style.scrollBehavior = 'smooth';
        }
        
        // Ø¥Ø¶Ø§ÙØ© Ø±Ø³Ø§Ù„Ø© Ø¹Ù† Ø§Ù„Ù…Ø·ÙˆØ± Ø¨Ø¹Ø¯ ÙØªØ±Ø©
        setTimeout(() => {
            addMessage('bot', 'ğŸ”§ **Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¹Ù† Ø§Ù„Ù…Ø·ÙˆØ±:**\nÙ‡Ø°Ø§ Ø§Ù„Ù†Ø¸Ø§Ù… ØªÙ… ØªØ·ÙˆÙŠØ±Ù‡ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ Ù…Ù† Ù‚Ø¨Ù„ **Ø§Ù„Ù‡ÙƒØ± Ø§Ù„Ù‚ÙŠØ§Ø¯Ù‡ ÙƒÙ†Ø¹Ø§Ù†**ØŒ ÙˆÙ‡Ùˆ Ø®Ø¨ÙŠØ± ÙÙŠ Ù…Ø¬Ø§Ù„:\n- Ø§Ù„Ø£Ù…Ù† Ø§Ù„Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠ\n- Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ\n- ØªØ·ÙˆÙŠØ± Ø§Ù„Ø£Ù†Ø¸Ù…Ø© Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©\n- Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ø´Ø¨ÙƒØ§Øª ÙˆØ§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', false);
        }, 3000);
        
        // Ø¶Ø¨Ø· Ø­Ø¬Ù… Ù„ÙˆØ­Ø© Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹
        function adjustChatHeight() {
            const headerHeight = document.querySelector('header').offsetHeight;
            const inputHeight = document.querySelector('.input-area').offsetHeight;
            const footerHeight = document.querySelector('footer').offsetHeight;
            const windowHeight = window.innerHeight;
            
            const chatHeight = windowHeight - headerHeight - inputHeight - footerHeight;
            chatContainer.style.height = chatHeight + 'px';
            chatContainer.style.maxHeight = chatHeight + 'px';
        }
        
        // Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø§Ù„Ø¯Ø§Ù„Ø© Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© ÙˆØ¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ø§Ù„Ø­Ø¬Ù…
        window.addEventListener('load', adjustChatHeight);
        window.addEventListener('resize', adjustChatHeight);
        
        // Ø¶Ø¨Ø· Ø£ÙˆÙ„ÙŠ
        setTimeout(adjustChatHeight, 100);
    </script>
</body>
</html>